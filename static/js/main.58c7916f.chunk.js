(this["webpackJsonpreact-minesweeper"]=this["webpackJsonpreact-minesweeper"]||[]).push([[0],{14:function(e,t,s){},15:function(e,t,s){},16:function(e,t,s){},18:function(e,t,s){},19:function(e,t,s){"use strict";s.r(t);var n=s(1),i=s.n(n),r=s(9),o=s.n(r),a=(s(14),s(15),s(2)),c=s(4),l=s(5),u=s(3),h=s(7),p=s(6),b=(s(16),s(0)),d={0:"zero",1:"one",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"eight"},m=function(e){Object(h.a)(s,e);var t=Object(p.a)(s);function s(e){var n;return Object(c.a)(this,s),(n=t.call(this,e)).state={i:e.index,row:e.row,col:e.col,isBomb:e.isBomb,number:e.number,isExposed:e.isExposed,isGuess:e.isGuess},n.handleClick=e.onClick,n.handleRightClick=e.onContextMenu,n}return Object(l.a)(s,[{key:"render",value:function(){var e="",t="";return this.state.isExposed?(e="exposed",this.state.isBomb?t="\ud83d\udca3":(t=this.state.number,e="".concat(e," ").concat(d[t]))):this.state.isGuess&&(t="\ud83d\udea9"),Object(b.jsx)("button",{className:"cell "+e,onClick:this.handleClick,onContextMenu:this.handleRightClick,children:t})}}]),s}(i.a.Component);var f=function(){var e=[],t=0;this.getLength=function(){return e.length-t},this.isEmpty=function(){return 0===e.length},this.enqueue=function(t){e.push(t)},this.dequeue=function(){if(0!==e.length){var s=e[t];return 2*++t>=e.length&&(e=e.slice(t),t=0),s}},this.peek=function(){return e.length>0?e[t]:void 0}},v=(s(18),[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]]);var j=function(e){Object(h.a)(s,e);var t=Object(p.a)(s);function s(e){var n;Object(c.a)(this,s);var i=(n=t.call(this,e)).init_board(e),r=Object(a.a)(i,2),o=r[0],l=r[1];return n.state={rows:e.N,cols:e.N,nBombs:e.nBombs,cells:o,bombs:l,numUnexposedRemaining:e.N*e.N,isGameOver:!1,isVictory:!1},n.handleClick=n.handleClick.bind(Object(u.a)(n)),n.handleReset=n.handleReset.bind(Object(u.a)(n)),n}return Object(l.a)(s,[{key:"init_board",value:function(e){for(var t=this,s=e.N,n=Array(s*s).fill(null),i=Array(s*s).fill(null),r=0;r<i.length;r++)i[r]=r;!function(e){for(var t=e.length-1;t>0;t--){var s=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[s],e[s]=n}}(i);var o=new Set(i.slice(0,e.nBombs)),a=this.set_numbers(s,Array.from(o));return[n=n.map((function(s,n){return Object(b.jsx)(m,{i:n,row:Math.floor(n/e.N),col:n%e.N,number:a[n],isBomb:!!o.has(n),isExposed:!1,isGuess:!1,onClick:function(){return t.handleClick(n)}},n)})),Array.from(o)]}},{key:"handleReset",value:function(){var e=this,t=this.init_board(this.props),s=Object(a.a)(t,2),n=s[0],i=s[1];this.setState((function(t){return{rows:e.props.N,cols:e.props.N,nBombs:e.props.nBombs,cells:n,bombs:i,numUnexposedRemaining:e.props.N*e.props.N,isGameOver:!1,isVictory:!1}}))}},{key:"exposeCell",value:function(e){return Object(b.jsx)(m,{i:e.props.index,row:e.props.row,col:e.props.col,number:e.props.number,isBomb:e.props.isBomb,isExposed:!0,isGuess:!1},e.props.index)}},{key:"handleClick",value:function(e){if(!this.state.isGameOver){var t=this.state.cells[e],s=this.state.cells;s[e]=this.exposeCell(t);var n,i=this.expand_region(s,e),r=Object(a.a)(i,2);s=r[0],n=r[1];var o=this.state.numUnexposedRemaining-n,c=t.props.isBomb||o===this.state.nBombs,l=c&&!t.props.isBomb;if(c)for(var u=0;u<this.state.nBombs;u++){var h=this.state.bombs[u];s[h]=this.exposeCell(s[h])}this.setState((function(e){return{cells:s,isGameOver:c,isVictory:l,numUnexposedRemaining:o}}))}}},{key:"to_rc",value:function(e){return[Math.floor(e/this.props.N),e%this.props.N]}},{key:"to_index",value:function(e,t){return this.props.N*e+t}},{key:"set_numbers",value:function(e,t){for(var s=Array(e*e).fill(0),n=0;n<t.length;n++)for(var i=this.to_rc(t[n]),r=Object(a.a)(i,2),o=r[0],c=r[1],l=0;l<v.length;l++){var u=o+v[l][0],h=c+v[l][1];if(u>=0&&u<e&&h>=0&&h<e){var p=this.to_index(u,h);s[p]=s[p]+1}}return s}},{key:"expand_region",value:function(e,t){var s=new f;s.enqueue(t);for(var n=1;!s.isEmpty();)for(var i=s.dequeue(),r=this.to_rc(i),o=Object(a.a)(r,2),c=o[0],l=o[1],u=0;u<v.length;u++){var h=c+v[u][0],p=l+v[u][1];if(h>=0&&h<this.props.N&&p>=0&&p<this.props.N){var b=this.to_index(h,p),d=e[b];d.props.isBomb||d.props.isExposed||(e[b]=this.exposeCell(d),n+=1),0!==d.props.number||d.props.isBomb||d.props.isExposed||s.enqueue(d.props.i)}}return[e,n]}},{key:"render_status_string",value:function(){return this.state.isGameOver&&!this.state.isVictory?"BUST!! You had ".concat(this.state.numUnexposedRemaining," cells remaining \ud83d\ude2d"):this.state.isGameOver&&this.state.isVictory?"YAY!! You cleared the minefield!! \ud83d\ude0a":"You have ".concat(this.state.numUnexposedRemaining," cells remaining")}},{key:"render",value:function(){var e=this,t=this.render_status_string(),s=Array(this.state.rows).fill(null).map((function(t,s){return Object(b.jsx)("div",{className:"board-row",children:e.state.cells.slice(s*e.state.cols,s*e.state.cols+e.state.cols)},100+s)}));return Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"status",children:t}),Object(b.jsx)("div",{className:"board",children:s}),Object(b.jsx)("div",{className:"status",children:Object(b.jsx)("button",{className:"status-button",onClick:this.handleReset,children:"Reset"})})]})}}]),s}(i.a.Component);var x=function(){return Object(b.jsx)("div",{className:"App",children:Object(b.jsx)("header",{className:"App-header",children:Object(b.jsx)(j,{N:30,nBombs:150})})})},O=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,20)).then((function(t){var s=t.getCLS,n=t.getFID,i=t.getFCP,r=t.getLCP,o=t.getTTFB;s(e),n(e),i(e),r(e),o(e)}))};o.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(x,{})}),document.getElementById("root")),O()}},[[19,1,2]]]);
//# sourceMappingURL=main.58c7916f.chunk.js.map